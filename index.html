<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>OCR Pro Dashboard</title>
    <script>console.log('ðŸ”¥ CANARY: JavaScript engine is working!');</script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- PDF Library Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.6.0/jspdf.plugin.autotable.min.js"></script>
    <!-- Flatpickr Date Picker -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Vercel Analytics -->
    <script src="https://unpkg.com/@vercel/analytics@1.5.0/dist/index.umd.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Authentication Container -->
    <div id="auth-container" class="flex items-center justify-center min-h-screen">
        <!-- Header Navbar (Login Screen Only) -->
        <header class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 w-[calc(100%-2rem)] max-w-7xl">
            <div class="bg-black/50 backdrop-blur-xl border border-[#FEE715]/20 rounded-full px-8 py-4 shadow-2xl hover:shadow-[#FEE715]/10 transition-all duration-300">
                <div class="flex items-center justify-between">
                    <!-- Logo -->
                    <div class="flex items-center space-x-3 group">
                        <div class="relative">
                            <div class="w-8 h-8 bg-[#FEE715] rounded-lg flex items-center justify-center transition-transform duration-300 group-hover:scale-110">
                                <span class="material-icons text-[#101820] font-bold">document_scanner</span>
                            </div>
                            <div class="absolute inset-0 bg-[#FEE715]/20 rounded-lg blur-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        </div>
                        <div class="flex flex-col">
                            <h1 class="text-lg font-bold text-[#FEE715] tracking-tight group-hover:text-[#FFD700] transition-colors duration-300">
                                OCR Pro
                            </h1>
                            <span class="text-xs text-gray-400 font-light group-hover:text-gray-300 transition-colors duration-300">
                                Dashboard
                            </span>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <nav class="hidden md:flex items-center space-x-8">
                        <a href="./landing.html" class="text-sm font-medium text-gray-300 hover:text-[#FEE715] transition-all duration-300 relative group">
                            Home
                            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FEE715] group-hover:w-full transition-all duration-300"></span>
                        </a>
                        <a href="./usecase.html" class="text-sm font-medium text-gray-300 hover:text-[#FEE715] transition-all duration-300 relative group">
                            Use Cases
                            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FEE715] group-hover:w-full transition-all duration-300"></span>
                        </a>
                        <a href="./pricing.html" class="text-sm font-medium text-gray-300 hover:text-[#FEE715] transition-all duration-300 relative group">
                            Pricing
                            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FEE715] group-hover:w-full transition-all duration-300"></span>
                        </a>
                    </nav>

                    <!-- Mobile menu button -->
                    <div class="flex items-center space-x-4">
                        <button class="md:hidden p-2 text-gray-300 hover:text-[#FEE715] transition-colors duration-200">
                            <span class="material-icons">menu</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="glass-effect rounded-3xl p-10 max-w-md w-full">
            <!-- Login Form -->
            <div id="login-form" class="auth-form-container">
                <div class="text-center">
                    <h1 class="text-3xl font-bold text-white mb-2">Welcome back</h1>
                    <p class="text-gray-400">Please enter your details to sign in.</p>
                </div>
                
                <form id="login-form-element" class="mt-8">
                    <div class="space-y-6">
                        <div>
                            <label class="text-sm font-medium text-gray-400" for="login-email">Email</label>
                            <div class="relative mt-1">
                                <input 
                                    class="input-field block w-full rounded-lg border-transparent p-4 pr-12 text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                                    id="login-email" 
                                    type="email" 
                                    placeholder="Enter your email"
                                    autocomplete="email"
                                    required
                                />
                                <button type="submit" class="absolute inset-y-0 right-0 flex items-center justify-center w-10 h-full text-white bg-blue-600 hover:bg-blue-700 rounded-r-lg">
                                    <span class="material-icons text-sm">arrow_forward</span>
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <label class="text-sm font-medium text-gray-400" for="login-password">Password</label>
                            <div class="relative mt-1">
                                <input 
                                    class="input-field block w-full rounded-lg border-transparent p-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
                                    id="login-password" 
                                    type="password" 
                                    placeholder="Enter your password"
                                    autocomplete="current-password"
                                    required
                                />
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center mt-6">
                        <input class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500" id="remember-me" name="remember-me" type="checkbox"/>
                        <label class="ml-2 block text-sm text-gray-300" for="remember-me">Remember me</label>
                    </div>
                </form>

                <div class="relative flex py-5 items-center">
                    <div class="flex-grow border-t border-gray-600"></div>
                    <span class="flex-shrink mx-4 text-gray-400 text-sm">OR</span>
                    <div class="flex-grow border-t border-gray-600"></div>
                </div>

                <div class="space-y-4">
                    <button id="google-login-btn" class="google-btn w-full flex items-center justify-center p-4 rounded-lg">
                        <svg class="google-logo" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Continue with Google
                    </button>
                </div>

                <div class="mt-8 text-center">
                    <p class="text-sm text-gray-400">
                        Don't have an account?
                        <a class="font-medium underline gradient-text cursor-pointer" id="show-signup">Create Account</a>
                    </p>
                </div>
            </div>

            <!-- Sign Up Form -->
            <div id="signup-form" class="auth-form-container signup-variant" style="display: none;">
                <div class="text-center">
                    <h1 class="text-3xl font-bold text-white mb-2">Join OCR Pro</h1>
                    <p class="text-gray-400">Create your account and start processing documents.</p>
                </div>
                
                <form id="signup-form-element" class="mt-8">
                    <div class="space-y-6">
                        <div>
                            <label class="text-sm font-medium text-gray-400" for="signup-email">Email</label>
                            <div class="relative mt-1">
                                <input 
                                    class="input-field block w-full rounded-lg border-transparent p-4 pr-12 text-white placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                    id="signup-email" 
                                    type="email" 
                                    placeholder="Enter your email"
                                    autocomplete="email"
                                    required
                                />
                                <button type="submit" class="absolute inset-y-0 right-0 flex items-center justify-center w-10 h-full text-white bg-purple-600 hover:bg-purple-700 rounded-r-lg">
                                    <span class="material-icons text-sm">arrow_forward</span>
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <label class="text-sm font-medium text-gray-400" for="signup-password">Password</label>
                            <div class="relative mt-1">
                                <input 
                                    class="input-field block w-full rounded-lg border-transparent p-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent" 
                                    id="signup-password" 
                                    type="password" 
                                    placeholder="Create a password (min 6 characters)"
                                    autocomplete="new-password"
                                    minlength="6"
                                    required
                                />
                            </div>
                        </div>
                    </div>
                </form>

                <div class="relative flex py-5 items-center">
                    <div class="flex-grow border-t border-gray-600"></div>
                    <span class="flex-shrink mx-4 text-gray-400 text-sm">OR</span>
                    <div class="flex-grow border-t border-gray-600"></div>
                </div>

                <div class="space-y-4">
                    <button id="google-signup-btn" class="google-btn w-full flex items-center justify-center p-4 rounded-lg">
                        <svg class="google-logo" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Continue with Google
                    </button>
                </div>

                <div class="mt-8 text-center">
                    <p class="text-sm text-gray-400">
                        Already have an account?
                        <a class="font-medium underline gradient-text cursor-pointer" id="show-login">Sign in here</a>
                    </p>
                </div>
            </div>

            <!-- Auth Message -->
            <div id="auth-message" class="auth-message mt-4"></div>
        </div>
    </div>


    <!-- Dashboard Container -->
    <div class="dashboard-container" style="display: none;">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">description</span>OCR Pro
                </div>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" data-page-id="page-dashboard">
                    <span class="material-icons">dashboard</span>Dashboard
                </div>
                <div class="nav-item" data-page-id="page-business-cards">
                    <span class="material-icons">business_center</span>Business Cards
                </div>
                <div class="nav-item" data-page-id="page-invoices">
                    <span class="material-icons">receipt</span>Invoices
                </div>
                <div class="nav-item" data-page-id="page-settings">
                    <span class="material-icons">settings</span>Settings
                </div>
                <div class="nav-item" data-page-id="page-billing">
                    <span class="material-icons">payment</span>Billing
                </div>
                <div class="nav-item" data-page-id="page-create-table">
                    <span class="material-icons">add_box</span>Create Table
                </div>
                <div class="nav-item digitize-nav-item" data-page-id="upload-modal">
                    <span class="material-icons">document_scanner</span>
                    <span class="digitize-text">Digitize</span>
                    <span class="material-icons sparkle-icon">auto_awesome</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Standardized App Header -->
            <header class="app-header">
                <!-- Left Section: Navigation + Title -->
                <div class="header-left">
                    <button id="hamburger-btn" class="hamburger-btn" aria-label="Open menu" aria-expanded="false" data-action="toggle-hamburger-menu">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                    <div class="header-title-group">
                        <h1 class="header-title" id="page-title">Dashboard</h1>
                        <p class="header-subtitle" id="page-subtitle">Monitor your document processing activity</p>
                    </div>
                </div>
                
                <!-- Right Section: User Avatar with Dropdown -->
                <div class="header-right">
                    <div class="user-dropdown-container">
                        <button id="user-dropdown-btn" class="user-dropdown-trigger" aria-label="User menu" aria-expanded="false" data-action="toggle-user-dropdown">
                            <div class="user-avatar">ðŸ‘¤</div>
                        </button>
                        
                        <!-- User Dropdown Menu -->
                        <div id="user-dropdown-menu" class="user-dropdown-menu" aria-hidden="true">
                            <div class="user-dropdown-header">
                                <div class="user-avatar-large">ðŸ‘¤</div>
                                <div class="user-info">
                                    <span id="dropdown-user-email" class="user-email">Loading...</span>
                                </div>
                            </div>
                            <div class="user-dropdown-divider"></div>
                            <div class="user-dropdown-actions">
                                <button class="dropdown-action-btn" data-action="toggle-theme">
                                    <span class="material-icons">light_mode</span>
                                    <span>Toggle Theme</span>
                                </button>
                                <button id="dropdown-logout-btn" class="dropdown-action-btn logout-action" data-action="logout">
                                    <span class="material-icons">logout</span>
                                    <span>Logout</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Mobile Hamburger Menu Overlay -->
            <div id="hamburger-menu" class="hamburger-menu-overlay" style="display: none;">
                <div class="hamburger-menu">
                    <div class="hamburger-menu-header">
                        <h3>Menu</h3>
                        <button class="close-hamburger-btn" data-action="close-hamburger-menu">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                    <nav class="hamburger-menu-content">
                        <a href="#" class="hamburger-menu-item" data-action="navigate-to-dashboard">
                            <span class="material-icons">dashboard</span>
                            <span>Dashboard</span>
                        </a>
                        <a href="#" class="hamburger-menu-item" data-action="navigate-to-business-cards">
                            <span class="material-icons">business_center</span>
                            <span>Business Cards</span>
                        </a>
                        <a href="#" class="hamburger-menu-item" data-action="navigate-to-invoices">
                            <span class="material-icons">receipt</span>
                            <span>Invoices</span>
                        </a>
                        <a href="#" class="hamburger-menu-item" data-action="navigate-to-settings">
                            <span class="material-icons">settings</span>
                            <span>Settings</span>
                        </a>
                        <a href="#" class="hamburger-menu-item" data-action="navigate-to-billing">
                            <span class="material-icons">payment</span>
                            <span>Billing</span>
                        </a>
                        <a href="#" class="hamburger-menu-item" data-action="navigate-to-create-table">
                            <span class="material-icons">add_box</span>
                            <span>Create Table</span>
                        </a>
                        <a href="#" class="hamburger-menu-item digitize-hamburger-item" data-action="show-upload-modal">
                            <span class="material-icons">document_scanner</span>
                            <span class="digitize-text">Digitize</span>
                            <span class="material-icons sparkle-icon">auto_awesome</span>
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Dashboard Page Content -->
            <div id="page-dashboard" class="page-content professional-grey-theme">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background: #9D76F820; color: #9D76F8;"><span class="material-icons" style="font-size: 1.8rem;">description</span></div>
                        </div>
                        <div class="stat-number" id="stat-docs-processed">0</div>
                        <div class="stat-label">Documents Processed</div>
                        <div class="stat-trend trend-up">â†— +12% from last month</div>
                    </div>



                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon" style="background: #8b5cf620; color: #8b5cf6;"><span class="material-icons" style="font-size: 1.8rem;">speed</span></div>
                        </div>
                        <div class="stat-number" id="stat-accuracy-rate">99.2%</div>
                        <div class="stat-label">Accuracy Rate</div>
                        <div class="stat-trend trend-up">â†— +0.3% from last month</div>
                    </div>
                </div>

                <!-- Usage Chart -->
                <div class="usage-chart">
                    <div class="chart-header">
                        <h3 class="chart-title chart-title--yellow">Monthly Usage</h3>
                        <span id="current-plan-info" style="color: #94a3b8;">Loading plan...</span>
                    </div>
                    <div class="usage-bar">
                        <div class="usage-fill usage-fill--glowing" id="usage-fill" style="width: 0%;"></div>
                    </div>
                    <div class="usage-stats">
                        <span id="usage-stats-text">Loading usage...</span>
                        <span id="usage-remaining">Loading...</span>
                    </div>
                </div>

                <!-- Value Proposition Section -->
                <div class="dashboard-value-proposition">
                    <h3 class="value-section-title">Your OCR Value Impact</h3>
                    <p class="calculation-note">Based on an average of 4 minutes per document and a $15/hr labor cost.</p>
                    <div class="dashboard-value-cards">
                        <div class="dashboard-value-card time-saved">
                            <div class="value-icon">
                                <span class="material-icons">schedule</span>
                            </div>
                            <div class="value-content">
                                <div class="dashboard-value-number" id="dashboard-hours-saved">~0 Hours</div>
                                <div class="value-label">Time Saved</div>
                            </div>
                        </div>
                        <div class="dashboard-value-card money-saved">
                            <div class="value-icon">
                                <span class="material-icons">attach_money</span>
                            </div>
                            <div class="value-content">
                                <div class="dashboard-value-number" id="dashboard-value-created">~$0</div>
                                <div class="value-label">Value Created</div>
                            </div>
                        </div>
                        <div class="dashboard-value-card roi-card">
                            <div class="value-icon">
                                <span class="material-icons">trending_up</span>
                            </div>
                            <div class="value-content">
                                <div class="dashboard-value-number" id="dashboard-roi">0%</div>
                                <div class="value-label">Return on Investment</div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Quick Actions -->
                <div class="quick-actions">
                    <div class="quick-action full-width" id="upload-area-button">
                        <div class="quick-action-icon"><span class="material-icons" style="font-size: 2.5rem;">cloud_upload</span></div>
                        <div class="quick-action-title">Upload Documents</div>
                        <div class="quick-action-desc">Process new files</div>
                    </div>
                </div>
            </div>

            <!-- Business Cards Page Content -->
            <div id="page-business-cards" class="page-content" style="display: none;">
                <!-- Recent Business Cards -->
            <div class="data-section">
                <div class="data-header">
                    <div class="table-header-content">
                        <h3 class="data-title">Recent Business Cards</h3>
                        
                        <!-- Integrated Bulk Actions (Hidden by Default) -->
                        <div class="integrated-bulk-actions" id="integrated-bulk-actions-business_cards" style="display: none;">
                            <span class="selection-count">0 selected</span>
                            <button class="btn-bulk-delete" onclick="handleBulkDelete('business_cards')">
                                <span class="material-icons">delete</span>
                                Delete
                            </button>
                        </div>
                    </div>
                    
                    <!-- Standard Controls -->
                    <div class="data-controls" id="data-controls-business_cards">
                        <input type="text" class="search-box business_cards-search" id="contacts-search" placeholder="Search contacts...">
                        <input type="text" class="search-box business_cards-date-range" id="contacts-date-range" placeholder="Select date range..." readonly style="width: 200px;">
                        <button type="button" class="btn btn-secondary business_cards-clear-btn" title="Clear Filters">Clear</button>
                        <div class="search-loading business_cards-loading" style="display: none;">
                            <span class="loading-spinner"></span>
                        </div>
                        <button class="btn btn-accent upload-to-table-btn" data-table="business_cards" style="margin-right: 8px;">
                            <span class="material-icons">cloud_upload</span>
                            Upload
                        </button>
                        <!-- Business Cards Export Dropdown -->
                        <div class="dropdown" style="display: inline-block;">
                            <button class="btn btn-primary dropdown-toggle" type="button" id="business-cards-export-dropdown" data-toggle="dropdown">
                                Export Selected
                                <span class="material-icons">keyboard_arrow_down</span>
                            </button>
                            <div class="dropdown-menu">
                                <button class="dropdown-item" id="export-vcf-btn">
                                    <span class="material-icons">contact_page</span>
                                    Export as VCF
                                </button>
                                <button class="dropdown-item" id="export-business-csv-btn">
                                    <span class="material-icons">description</span>
                                    Export as CSV
                                </button>
                                <button class="dropdown-item" id="export-business-pdf-btn">
                                    <span class="material-icons">picture_as_pdf</span>
                                    Export as PDF
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="table-container" id="business_cards-table-container">
                    <table class="data-table data-table-neutral-theme">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="select-all-business_cards"></th>
                                <th>Name</th>
                                <th>Job Position</th>
                                <th>Company</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="contacts-table-body">
                        </tbody>
                    </table>
                </div>
            </div>

            </div>

            <!-- Invoices Page Content -->
            <div id="page-invoices" class="page-content" style="display: none;">
                <!-- Recent Invoices -->
                <div class="data-section">
                <div class="data-header">
                    <h3 class="data-title">Recent Invoices</h3>
                    <div class="data-controls">
                        <input type="text" class="search-box invoices-search" id="invoices-search" placeholder="Search invoices...">
                        <input type="text" class="search-box invoices-date-range" id="invoices-date-range" placeholder="Select date range..." readonly style="width: 200px;">
                        <button type="button" class="btn btn-secondary invoices-clear-btn" title="Clear Filters">Clear</button>
                        <div class="search-loading invoices-loading" style="display: none;">
                            <span class="loading-spinner"></span>
                        </div>
                        <button class="btn btn-accent upload-to-table-btn" data-table="invoices" style="margin-right: 8px;">
                            <span class="material-icons">cloud_upload</span>
                            Upload
                        </button>
                        <!-- Invoices Export Dropdown -->
                        <div class="dropdown" style="display: inline-block;">
                            <button class="btn btn-primary dropdown-toggle" type="button" id="invoices-export-dropdown" data-toggle="dropdown">
                                Export Selected
                                <span class="material-icons">keyboard_arrow_down</span>
                            </button>
                            <div class="dropdown-menu">
                                <button class="dropdown-item" id="export-invoices-csv-btn">
                                    <span class="material-icons">description</span>
                                    Export as CSV
                                </button>
                                <button class="dropdown-item" id="export-invoices-pdf-btn">
                                    <span class="material-icons">picture_as_pdf</span>
                                    Export as PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table data-table-neutral-theme">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="select-all-invoices"></th>
                                <th>Invoice #</th>
                                <th>Supplier</th>
                                <th>Product</th>
                                <th>Loading Port</th>
                                <th>Amount</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="invoices-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
            </div>

            <!-- Settings Page Content -->
            <div id="page-settings" class="page-content" style="display: none;">
                <div class="settings-container">
                    <!-- Settings Header -->
                    <div class="settings-header">
                        <h2>Settings</h2>
                        <p>Customize your OCR Pro experience and manage your account</p>
                    </div>

                    <!-- Settings Grid Layout -->
                    <div class="settings-grid">
                        
                        <!-- Appearance Section -->
                        <div class="settings-card">
                            <h3>
                                <span class="material-icons">palette</span>
                                Appearance
                            </h3>
                            <div class="setting-item">
                                <label>Theme Preference</label>
                                <div class="theme-toggle">
                                    <input type="checkbox" id="theme-toggle">
                                    <label for="theme-toggle" class="toggle-switch">
                                        <span class="dark-label">Dark</span>
                                        <span class="light-label">Light</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Profile Management Section -->
                        <div class="settings-card">
                            <h3>
                                <span class="material-icons">person</span>
                                Profile
                            </h3>
                            <!-- COMMENTED OUT - Display Name Change
                            <form id="profile-form">
                                <div class="form-group">
                                    <label for="display-name">Display Name</label>
                                    <input type="text" id="display-name" placeholder="Your display name">
                                </div>
                                <button type="submit" class="btn btn-primary">Update Profile</button>
                            </form>
                            
                            <hr style="border: none; height: 1px; background: var(--border-primary); margin: 24px 0; opacity: 0.3;">
                            -->
                            
                            <!-- Password Change Section -->
                            <div class="password-change-section">
                                <button type="button" class="btn btn-secondary" id="show-password-form">
                                    <span class="material-icons" style="vertical-align: middle; margin-right: 8px; font-size: 1rem;">lock</span>
                                    Change Password
                                </button>
                                
                                <form id="password-form" style="display: none; margin-top: 16px;">
                                    <div class="form-group">
                                        <label for="current-password">Current Password</label>
                                        <input type="password" id="current-password" placeholder="Enter current password">
                                    </div>
                                    <div class="form-group">
                                        <label for="new-password">New Password</label>
                                        <input type="password" id="new-password" placeholder="Enter new password (min 6 characters)" minlength="6">
                                    </div>
                                    <div style="display: flex; gap: 12px;">
                                        <button type="submit" class="btn btn-primary">Update Password</button>
                                        <button type="button" class="btn btn-secondary" id="cancel-password-form">Cancel</button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- COMMENTED OUT - Preferences Section
                        <div class="settings-card">
                            <h3>
                                <span class="material-icons">tune</span>
                                Preferences
                            </h3>
                            <div class="setting-item">
                                <label for="default-doc-type">Default Document Type</label>
                                <select id="default-doc-type">
                                    <option value="">Choose a default type...</option>
                                    <option value="business_cards">Business Cards</option>
                                    <option value="invoices">Invoices</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="email-notifications" style="width: auto; margin-right: 8px;">
                                    Email notifications for completed processing
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="auto-save-enabled" style="width: auto; margin-right: 8px;">
                                    Auto-save extracted data
                                </label>
                            </div>
                        </div>
                        -->

                        <!-- Account Information Section -->
                        <div class="settings-card">
                            <h3>
                                <span class="material-icons">info</span>
                                Account Information
                            </h3>
                            <div class="setting-item">
                                <label>Email Address</label>
                                <input type="email" id="user-email-display" readonly class="readonly-account-input">
                            </div>
                            <div class="setting-item">
                                <label>Account Created</label>
                                <input type="text" id="account-created" readonly class="readonly-account-input">
                            </div>
                            <div class="setting-item">
                                <label>Plan</label>
                                <input type="text" value="Pro Plan - 10,000 pages/month" readonly class="readonly-account-input">
                            </div>
                        </div>

                        <!-- Danger Zone Section -->
                        <div class="settings-card">
                            <h3>
                                <span class="material-icons">warning</span>
                                Danger Zone
                            </h3>
                            <div class="setting-item">
                                <label>Delete Account</label>
                                <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 8px 0;">This action cannot be undone. All your data will be permanently deleted.</p>
                                <button class="btn btn-danger" id="delete-account-btn">Delete Account</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Billing Page Content -->
            <div id="page-billing" class="page-content" style="display: none;">
                <div class="billing-container">
                    
                    <!-- Section 1: Current Plan & Usage -->
                    <div class="billing-section current-plan-section">
                        <h2>Current Plan & Usage</h2>
                        <div class="plan-usage-grid">
                            <div class="current-plan-card">
                                <div class="plan-header">
                                    <h3 id="current-plan-name">Loading...</h3>
                                    <span class="plan-badge" id="plan-status-badge">Active</span>
                                </div>
                                <p id="current-plan-details">Loading plan details...</p>
                                <div class="plan-meta">
                                    <span id="plan-price">Loading...</span>
                                    <span id="plan-billing-cycle">Loading...</span>
                                </div>
                                <div class="plan-actions" style="margin-top: 16px;">
                                    <a href="https://buy.stripe.com/test_cNi3cv4BJbDE8Fg4Vh6wE00" target="_blank" class="btn btn-primary" id="upgrade-plan-btn" style="margin-right: 12px; text-decoration: none;">
                                        <span class="material-icons" style="font-size: 1rem; margin-right: 6px;">upgrade</span>
                                        Upgrade Plan
                                    </a>
                                    <button class="btn btn-secondary" id="buy-credits-btn">
                                        <span class="material-icons" style="font-size: 1rem; margin-right: 6px;">add_circle</span>
                                        Buy Credits
                                    </button>
                                </div>
                            </div>
                            <div class="usage-chart">
                                <div class="chart-header">
                                    <h3 class="chart-title chart-title--yellow">Credits Usage</h3>
                                    <span id="billing-plan-info" style="color: #94a3b8;">Loading...</span>
                                </div>
                                <div class="usage-bar">
                                    <div class="usage-fill usage-fill--glowing" id="billing-usage-fill" style="width: 0%;"></div>
                                </div>
                                <div class="usage-stats">
                                    <span id="billing-usage-text">Loading...</span>
                                    <span id="billing-usage-remaining">Loading...</span>
                                </div>
                                <!-- Credits Summary Cards -->
                                <div class="credits-summary" style="margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                    <div class="credit-card">
                                        <div class="credit-card-icon">
                                            <span class="material-icons">account_balance_wallet</span>
                                        </div>
                                        <div class="credit-card-content">
                                            <div class="credit-amount" id="credits-remaining">-</div>
                                            <div class="credit-label">Credits Remaining</div>
                                        </div>
                                    </div>
                                    <div class="credit-card">
                                        <div class="credit-card-icon">
                                            <span class="material-icons">autorenew</span>
                                        </div>
                                        <div class="credit-card-content">
                                            <div class="credit-amount" id="next-reset-date">-</div>
                                            <div class="credit-label">Next Reset</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section 2: Packages Section (nanobanana.ai inspired) -->
                    <div class="billing-section packages-section">
                        <h2 class="packages-title-centered">Choose Your Perfect Plan</h2>
                        <p class="packages-subtitle packages-subtitle-neon">Scan the future</p>
                        
                        <!-- Tab Switcher inspired by nanobanana.ai -->
                        <div class="plan-tabs">
                            <button class="plan-tab active" data-tab="subscriptions">Subscriptions</button>
                            <button class="plan-tab" data-tab="credit-packs">Credit Packs</button>
                        </div>

                        <!-- Container for Subscription Plans -->
                        <div id="subscriptions" class="packages__container">
                            <!-- Trial Plan -->
                            <div class="package-card">
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Trial</h3>
                                    <div class="package-card__badge package-card__badge--trial">Limited Time</div>
                                    <p class="package-card__description">Perfect for getting started</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">Free</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 50 pages total</li>
                                    <li><span class="feature-check">âœ“</span> 7 days trial</li>
                                    <li><span class="feature-check">âœ“</span> Basic support</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--secondary" disabled>Current Plan</button>
                                </div>
                            </div>

                            <!-- Basic Plan (Most Popular) -->
                            <div class="package-card package-card--popular">
                                <div class="package-card__badge">Most Popular</div>
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Basic</h3>
                                    <p class="package-card__description">Perfect for small teams</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">$14.99</span>
                                    <span class="package-card__billing-cycle">/month</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 100 credits/month</li>
                                    <li><span class="feature-check">âœ“</span> Perfect for individuals</li>
                                    <li><span class="feature-check">âœ“</span> Email support</li>
                                    <li><span class="feature-check">âœ“</span> Basic export (CSV, PDF)</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--primary"
                                            data-price-id="price_basic_14_99"
                                            data-plan="basic">Upgrade Plan</button>
                                </div>
                            </div>

                            <!-- Vision Pro+ Plan -->
                            <div class="package-card">
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Vision Pro+</h3>
                                    <div class="package-card__badge package-card__badge--enterprise">Pro</div>
                                    <p class="package-card__description">For advanced professionals</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">$49.99</span>
                                    <span class="package-card__billing-cycle">/month</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 5,000 pages/month</li>
                                    <li><span class="feature-check">âœ“</span> Advanced OCR features</li>
                                    <li><span class="feature-check">âœ“</span> Priority support</li>
                                    <li><span class="feature-check">âœ“</span> API access</li>
                                    <li><span class="feature-check">âœ“</span> Batch processing</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--secondary" 
                                            data-price-id="price_business_monthly" 
                                            data-plan="business">Upgrade Plan</button>
                                </div>
                            </div>

                            <!-- Vision Max Plan -->
                            <div class="package-card">
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Vision Max</h3>
                                    <div class="package-card__badge package-card__badge--enterprise">Enterprise</div>
                                    <p class="package-card__description">For large enterprises</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">$199.99</span>
                                    <span class="package-card__billing-cycle">/month</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 25,000 pages/month</li>
                                    <li><span class="feature-check">âœ“</span> Enterprise analytics</li>
                                    <li><span class="feature-check">âœ“</span> Priority support</li>
                                    <li><span class="feature-check">âœ“</span> Full API access</li>
                                    <li><span class="feature-check">âœ“</span> Custom integrations</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--secondary" 
                                            data-price-id="price_enterprise_monthly" 
                                            data-plan="enterprise">Upgrade Plan</button>
                                </div>
                            </div>
                        </div>

                        <!-- Container for Credit Packs (Initially Hidden) -->
                        <div id="credit-packs" class="packages__container" style="display: none;">
                            <!-- Quick Scan Pack -->
                            <div class="package-card">
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Quick Scan</h3>
                                    <p class="package-card__description">Perfect for small projects</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">$9.99</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 100 high-quality scans</li>
                                    <li><span class="feature-check">âœ“</span> Never expires</li>
                                    <li><span class="feature-check">âœ“</span> Standard processing speed</li>
                                    <li><span class="feature-check">âœ“</span> PDF/CSV export</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--secondary" 
                                            data-price-id="price_credits_100" 
                                            data-plan="pay_as_you_go">Purchase Credits</button>
                                </div>
                            </div>

                            <!-- Power Pack (Most Popular) -->
                            <div class="package-card package-card--popular">
                                <div class="package-card__badge">Most Popular</div>
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Power Pack</h3>
                                    <p class="package-card__description">Best value for regular users</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">$39.99</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 500 high-quality scans</li>
                                    <li><span class="feature-check">âœ“</span> Never expires</li>
                                    <li><span class="feature-check">âœ“</span> Priority processing queue</li>
                                    <li><span class="feature-check">âœ“</span> Advanced export formats</li>
                                    <li><span class="feature-check">âœ“</span> Bulk discount included</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--primary" 
                                            data-price-id="price_credits_500" 
                                            data-plan="pay_as_you_go">Purchase Credits</button>
                                </div>
                            </div>

                            <!-- Professional Pack -->
                            <div class="package-card">
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Professional</h3>
                                    <p class="package-card__description">For heavy processing needs</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">$89.99</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 1,250 high-quality scans</li>
                                    <li><span class="feature-check">âœ“</span> Never expires</li>
                                    <li><span class="feature-check">âœ“</span> Priority processing queue</li>
                                    <li><span class="feature-check">âœ“</span> Professional export suite</li>
                                    <li><span class="feature-check">âœ“</span> Maximum bulk discount</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--secondary" 
                                            data-price-id="price_credits_1250" 
                                            data-plan="pay_as_you_go">Purchase Credits</button>
                                </div>
                            </div>

                            <!-- Enterprise Pack -->
                            <div class="package-card">
                                <div class="package-card__header">
                                    <h3 class="package-card__title">Enterprise</h3>
                                    <div class="package-card__badge package-card__badge--enterprise">Best Value</div>
                                    <p class="package-card__description">Maximum value for businesses</p>
                                </div>
                                <div class="package-card__pricing">
                                    <span class="package-card__price">$199.99</span>
                                </div>
                                <ul class="package-card__features">
                                    <li><span class="feature-check">âœ“</span> 3,000 high-quality scans</li>
                                    <li><span class="feature-check">âœ“</span> Never expires</li>
                                    <li><span class="feature-check">âœ“</span> Fastest processing speed</li>
                                    <li><span class="feature-check">âœ“</span> Dedicated account support</li>
                                    <li><span class="feature-check">âœ“</span> Enterprise export tools</li>
                                    <li><span class="feature-check">âœ“</span> Maximum savings per scan</li>
                                </ul>
                                <div class="package-card__footer">
                                    <button class="btn-pkg btn-pkg--secondary" 
                                            data-price-id="price_credits_3000" 
                                            data-plan="pay_as_you_go">Purchase Credits</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Section 4: Payment & Subscription Management -->
                    <div class="billing-section payment-section">
                        <h2>Payment & Subscription Management</h2>
                        
                        <div class="payment-grid">
                            <div class="payment-method-card">
                                <div class="card-header">
                                    <h3>
                                        <span class="material-icons">credit_card</span>
                                        Payment Method
                                    </h3>
                                </div>
                                <div class="current-payment-method">
                                    <div class="payment-info">
                                        <span class="material-icons">credit_card</span>
                                        <span id="payment-method-display">No payment method on file</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" id="update-payment-btn">
                                    <span class="material-icons" style="vertical-align: middle; margin-right: 8px; font-size: 1rem;">edit</span>
                                    Update Payment Method
                                </button>
                            </div>
                            
                            <div class="subscription-actions-card">
                                <div class="card-header">
                                    <h3>
                                        <span class="material-icons">manage_accounts</span>
                                        Subscription Actions
                                    </h3>
                                </div>
                                <div class="action-buttons">
                                    <button class="btn btn-secondary" id="manage-subscription-btn">
                                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px; font-size: 1rem;">settings</span>
                                        Manage Subscription
                                    </button>
                                </div>
                                <div class="danger-zone">
                                    <h4>
                                        <span class="material-icons">warning</span>
                                        Danger Zone
                                    </h4>
                                    <p>Canceling your subscription will downgrade you to the trial plan at the end of your billing cycle.</p>
                                    <button class="btn btn-danger" id="cancel-subscription-btn">
                                        <span class="material-icons" style="vertical-align: middle; margin-right: 8px; font-size: 1rem;">cancel</span>
                                        Cancel Subscription
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stripe-disclaimer">
                            <div class="disclaimer-content">
                                <p><strong>Security Notice:</strong> Your payment details are managed securely by our payment partner, Stripe. We never store sensitive card information on our systems.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Custom Table Page Content -->
            <div id="page-create-table" class="page-content" style="display: none;">
                <div class="create-table-container">
                    <div class="create-table-header">
                        <h2>Create Custom Table</h2>
                        <p>Create a personalized table to organize your documents exactly the way you need them</p>
                        <div class="help-banner">
                            <span class="material-icons">info</span>
                            <div>
                                <strong>No technical knowledge required!</strong> Just type natural field names like "Customer Name" and we'll handle the rest automatically.
                            </div>
                        </div>
                    </div>

                    <form id="create-table-form" class="create-table-form">
                        <!-- Table Basic Info Section -->
                        <div class="form-section">
                            <h3>Table Information</h3>
                            <div class="form-group">
                                <label for="table-display-name">Display Name *</label>
                                <input 
                                    type="text" 
                                    id="table-display-name" 
                                    class="form-input" 
                                    placeholder="e.g., Receipts, Contracts, Quotes"
                                    required
                                >
                                <small class="help-text">This is how your table will appear in the navigation</small>
                            </div>
                        </div>

                        <!-- Fields Definition Section -->
                        <div class="form-section">
                            <div class="section-header">
                                <h3>Define Your Fields</h3>
                                <p class="section-subtitle">Add the information you want to capture from your documents</p>
                                <button type="button" id="add-field-btn" class="btn btn-secondary">
                                    <span class="material-icons" style="font-size: 1rem; margin-right: 8px;">add</span>Add Another Field
                                </button>
                            </div>
                            
                            <div id="fields-container">
                                <!-- Initial field will be added here -->
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button type="button" id="cancel-table-creation" class="btn btn-secondary">Cancel</button>
                            <button type="submit" id="save-table-btn" class="btn btn-primary">
                                <span class="material-icons" style="font-size: 1rem; margin-right: 8px;">save</span>Create Table
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Generic Custom Table Template (will be cloned for each custom table) -->
            <div id="generic-custom-table-template" class="page-content" style="display: none;">
                <div class="data-section">
                    <div class="data-header">
                        <h3 class="data-title"></h3>
                        <div class="data-controls">
                            <input type="text" class="search-box generic-search" placeholder="Search...">
                            <input type="text" class="search-box generic-date-range" placeholder="Select date range..." readonly style="width: 200px;">
                            <button type="button" class="btn btn-secondary generic-clear-btn" title="Clear Filters">Clear</button>
                            <div class="search-loading" style="display: none;">
                                <span class="loading-spinner"></span>
                            </div>
                            <button class="btn btn-accent generic-upload-to-table-btn" style="margin-right: 8px;">
                                <span class="material-icons">cloud_upload</span>
                                Upload
                            </button>
                            <!-- Bulk Delete Button -->
                            <button class="btn btn-danger generic-bulk-delete-btn" style="margin-right: 8px; display: none;">
                                <span class="material-icons">delete</span>
                                Delete Selected
                            </button>
                            
                            <!-- Custom Tables Export Dropdown -->
                            <div class="dropdown" style="display: inline-block;">
                                <button class="btn btn-primary dropdown-toggle generic-export-dropdown" type="button" data-toggle="dropdown">
                                    Export Selected
                                    <span class="material-icons">keyboard_arrow_down</span>
                                </button>
                                <div class="dropdown-menu">
                                    <button class="dropdown-item generic-export-csv-btn">
                                        <span class="material-icons">description</span>
                                        Export as CSV
                                    </button>
                                    <button class="dropdown-item generic-export-pdf-btn">
                                        <span class="material-icons">picture_as_pdf</span>
                                        Export as PDF
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Table Management Dropdown (only for custom tables) -->
                            <div class="dropdown generic-table-management" style="display: none;">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">
                                    <span class="material-icons">settings</span>
                                    Manage Table
                                </button>
                                <div class="dropdown-menu">
                                    <button class="dropdown-item generic-edit-table-btn">
                                        <span class="material-icons">edit</span>
                                        Edit Table
                                    </button>
                                    <button class="dropdown-item generic-delete-table-btn" style="color: #dc3545;">
                                        <span class="material-icons">delete</span>
                                        Delete Table
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-container" id="generic-table-container">
                        <table class="data-table data-table-neutral-theme">
                            <thead>
                                <tr class="generic-table-header">
                                    <!-- Headers will be generated dynamically -->
                                </tr>
                            </thead>
                            <tbody class="generic-table-body">
                                <!-- Rows will be generated dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Upload Page Content -->
            <div id="page-upload" class="page-content" style="display: none;">
                <div class="upload-container">
                    <h2>Upload Documents</h2>
                    <p>Use the upload button in the toolbar or drag and drop files to get started.</p>
                    <div class="upload-page-actions">
                        <button class="btn btn-primary" id="upload-page-button">
                            <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">cloud_upload</span>Upload Documents
                        </button>
                    </div>
                </div>
            </div>

        </main>


        <!-- Tables Bottom Sheet Modal -->
        <div id="tables-bottom-sheet" class="bottom-sheet-overlay" style="display: none;">
            <div class="bottom-sheet">
                <div class="bottom-sheet-header">
                    <div class="bottom-sheet-handle"></div>
                    <h3>Select Table</h3>
                    <button class="close-sheet-btn" data-action="close-tables-sheet">
                        <span class="material-icons">close</span>
                    </button>
                </div>
                <div class="bottom-sheet-content">
                    <!-- Standard Tables -->
                    <div class="sheet-section">
                        <h4>Standard Tables</h4>
                        <a href="#" class="sheet-item" data-action="navigate-to-dashboard">
                            <span class="material-icons">dashboard</span>
                            <span>Dashboard</span>
                        </a>
                        <a href="#" class="sheet-item" data-action="navigate-to-business-cards">
                            <span class="material-icons">badge</span>
                            <span>Business Cards</span>
                        </a>
                        <a href="#" class="sheet-item" data-action="navigate-to-invoices">
                            <span class="material-icons">receipt</span>
                            <span>Invoices</span>
                        </a>
                    </div>
                    <!-- Custom Tables Container -->
                    <div class="sheet-section" id="custom-tables-sheet-section" style="display: none;">
                        <h4>Custom Tables</h4>
                        <div id="custom-tables-container">
                            <!-- Custom tables will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="upload-modal" class="modal-overlay" style="display: none;" data-backdrop-click>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload Documents</h3>
                <button id="close-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Table Selection Dropdown -->
                <div class="form-group" style="margin-bottom: 20px;">
                    <label for="table-selector" style="display: block; margin-bottom: 8px; font-weight: 500; color: #374151;">Upload to Table:</label>
                    <select id="table-selector" class="search-box" style="width: 100%; padding: 8px 12px;">
                        <option value="">Select a table...</option>
                    </select>
                </div>
                
                <!-- Upload Method Selection -->
                <div id="upload-method-selection">
                    <div id="drop-zone" class="drop-zone">
                        <p>Drag & drop files here, or click to select files</p>
                        <input type="file" id="file-input" multiple hidden>
                    </div>
                    
                    <div class="upload-alternatives">
                        <p style="text-align: center; margin: 15px 0 10px 0; color: #94a3b8; font-size: 0.9rem;">Or use another method:</p>
                        <div class="camera-options">
                            <button id="use-device-camera" class="btn btn-secondary camera-option-btn" type="button">
                                <span class="material-icons">photo_camera</span>
                                Use This Device's Camera
                            </button>
                            <!-- QR Upload button - Hidden by feature flag -->
                            <button id="use-phone-camera" class="btn btn-secondary camera-option-btn" type="button" style="display: none;">
                                <span class="material-icons">qr_code_scanner</span>
                                QR Laptop â‡„ Phone
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Camera View (Initially Hidden) -->
                <div id="camera-view" style="display: none;">
                    <div class="camera-container">
                        <div class="camera-header">
                            <button id="back-to-upload" class="btn btn-secondary" type="button">
                                <span class="material-icons">arrow_back</span>
                                Back
                            </button>
                            <h4>Take a Photo</h4>
                        </div>
                        <div class="camera-feed-container">
                            <video id="camera-feed" autoplay muted playsinline></video>
                            <canvas id="capture-canvas" style="display: none;"></canvas>
                        </div>
                        <div class="camera-controls">
                            <button id="capture-photo" class="btn btn-primary camera-capture-btn" type="button">
                                <span class="material-icons">photo_camera</span>
                                Capture Photo
                            </button>
                        </div>
                        <div id="camera-error" class="error-message" style="display: none;">
                            <p>Camera access denied or not available. Please check your browser permissions.</p>
                        </div>
                    </div>
                </div>

                <!-- QR Code View (Initially Hidden) -->
                <!-- QR Code View - DISABLED BY FEATURE FLAG -->
                <div id="qr-code-view" class="qr-modal-container" style="display: none !important;">
                    <!-- 1. Back Button - Top aligned left -->
                    <div class="qr-back-section">
                        <button id="back-to-upload-from-qr" class="back-button" type="button">
                            â† Back
                        </button>
                    </div>
                    
                    <!-- 2. Upload to Table Section - Main heading -->
                    <div class="qr-section-header">
                        <h2>Upload to Table</h2>
                    </div>
                    
                    <!-- 3. Quick Upload Section - Instructions above QR -->
                    <div class="quick-upload-section">
                        <p>Scan the QR code below with your phone's camera to upload photos instantly</p>
                    </div>
                    
                    <!-- 4. QR Code - Centered -->
                    <div class="qr-code-section">
                        <div class="qr-code-container">
                            <div id="qr-code-display">
                                <!-- QR Code will be generated here -->
                            </div>
                            <div id="qr-loading" class="qr-loading">
                                <div class="spinner"></div>
                                <p>Generating QR Code...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 5. Timer and Regenerate Button - Single row -->
                    <div class="timer-controls-section">
                        <div class="timer-display">
                            <span id="qr-timer">05:00</span>
                        </div>
                        <button id="refresh-qr" class="regenerate-button" type="button">
                            Regenerate
                        </button>
                    </div>
                    
                    <!-- Status Block -->
                    <div class="qr-status-block" aria-live="polite" aria-label="QR Code Status">
                        <div class="qr-status">
                            <div class="status-indicator">
                                <div id="status-dot" class="status-dot pending" aria-hidden="true"></div>
                                <span id="qr-status-text">Generating secure link...</span>
                            </div>
                            <span id="status-label" class="status-label">Pending</span>
                        </div>
                    </div>
                    
                    <div id="qr-error" class="error-message" style="display: none;">
                        <p>Failed to generate QR code. Please try again.</p>
                    </div>
                </div>

                <!-- File Preview Container -->
                <div id="file-preview-container">
                    <h4>Selected Files:</h4>
                    <ul id="file-preview-list">
                        <!-- File previews will be generated here by JavaScript -->
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button id="upload-btn" class="btn btn-primary">Upload Files</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="edit-modal-title">Edit Record</h3>
                <button id="close-edit-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-form">
                    <div id="edit-form-fields">
                        <!-- Form fields will be dynamically generated here -->
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancel-edit-btn" class="btn btn-secondary">Cancel</button>
                <button type="button" id="save-changes-btn" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-confirm-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>Confirm Delete</h3>
                <button id="close-delete-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p id="delete-message">Are you sure you want to delete this record? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancel-delete-btn" class="btn btn-secondary">Cancel</button>
                <button type="button" id="confirm-delete-btn" class="btn btn-danger">Confirm Delete</button>
            </div>
        </div>
    </div>

    <!-- Edit Table Modal -->
    <div id="edit-table-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Edit Table</h3>
                <button id="close-edit-table-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-table-form">
                    <!-- Table Name Section -->
                    <div class="form-group">
                        <label for="edit-table-name">Table Name *</label>
                        <input type="text" id="edit-table-name" class="form-input" required>
                    </div>

                    <!-- Columns Section -->
                    <div class="form-group">
                        <label>Columns</label>
                        <div id="edit-columns-container">
                            <!-- Column fields will be dynamically generated here -->
                        </div>
                        <button type="button" id="add-column-btn" class="btn btn-secondary" style="margin-top: 10px;">
                            <span class="material-icons">add</span>
                            Add Column
                        </button>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancel-edit-table-btn" class="btn btn-secondary">Cancel</button>
                <button type="button" id="save-table-changes-btn" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Delete Table Confirmation Modal -->
    <div id="delete-table-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 style="color: #dc3545;">Delete Table</h3>
                <button id="close-delete-table-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <span class="material-icons" style="font-size: 4rem; color: #dc3545;">warning</span>
                </div>
                <p id="delete-table-message" style="text-align: center; font-weight: 500; margin-bottom: 15px;">
                    Are you sure you want to delete this table?
                </p>
                <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 6px; padding: 15px; margin-bottom: 20px;">
                    <p style="color: #991b1b; margin: 0; font-size: 14px;">
                        <strong>Warning:</strong> This will permanently delete:
                    </p>
                    <ul style="color: #991b1b; margin: 8px 0 0 20px; font-size: 14px;">
                        <li>The table structure and configuration</li>
                        <li>All data in this table (cannot be recovered)</li>
                        <li>The table from your navigation menu</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="confirm-table-name">Type the table name to confirm:</label>
                    <input type="text" id="confirm-table-name" class="form-input" placeholder="Enter table name">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancel-delete-table-btn" class="btn btn-secondary">Cancel</button>
                <button type="button" id="confirm-delete-table-btn" class="btn btn-danger" disabled>Delete Table</button>
            </div>
        </div>
    </div>

    <!-- Insufficient Credits Modal -->
    <div id="insufficient-credits-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h3 style="color: #f59e0b;">âš¡ Insufficient Credits</h3>
                <button id="close-insufficient-credits-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <span class="material-icons" style="font-size: 4rem; color: #f59e0b;">account_balance_wallet</span>
                </div>
                <p style="text-align: center; font-weight: 500; margin-bottom: 20px; color: #ffffff;">
                    You don't have enough credits to process this document. Choose an option below to continue:
                </p>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="button" id="modal-topup-credits-btn" class="btn btn-secondary" style="flex: 1;">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 5px;">add_circle</span>
                        Buy More Credits
                    </button>
                    <button type="button" id="modal-upgrade-plan-btn" class="btn btn-primary" style="flex: 1;">
                        <span class="material-icons" style="vertical-align: middle; margin-right: 5px;">upgrade</span>
                        Upgrade Plan
                    </button>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <button type="button" id="cancel-insufficient-credits-btn" class="btn btn-outline" style="background: none; border: 1px solid #ffffff; color: #ffffff;">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>console.log('ðŸ”¥ CANARY: About to load app.js module...');</script>
    <script type="module" src="tableRefresh.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="customTable.js"></script>
</body>
</html>